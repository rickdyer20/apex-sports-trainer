# Basketball Analysis Service - Production Environment Configuration
# Complete environment variables for authentication, payments, and production deployment

# =======================
# CORE APPLICATION SETTINGS
# =======================
FLASK_APP=web_app.py
FLASK_ENV=production
FLASK_DEBUG=false
FLASK_HOST=0.0.0.0
PORT=5000
SECRET_KEY=your-super-secret-key-change-this-in-production-min-32-chars
DEBUG=False

# Performance Optimization Environment Variables
TF_CPP_MIN_LOG_LEVEL=2
CUDA_VISIBLE_DEVICES=
TF_ENABLE_ONEDNN_OPTS=0
MEDIAPIPE_DISABLE_GPU=1

# Application URLs
FRONTEND_URL=https://basketball-analysis.yourdomain.com
BACKEND_URL=https://api.basketball-analysis.yourdomain.com

# =======================
# DATABASE CONFIGURATION
# =======================
# PostgreSQL Production Database
DATABASE_URL=postgresql://basketball_user:secure_password@basketball-db.cluster-xyz.us-east-1.rds.amazonaws.com:5432/basketball_analysis
DB_HOST=basketball-db.cluster-xyz.us-east-1.rds.amazonaws.com
DB_PORT=5432
DB_NAME=basketball_analysis
DB_USER=basketball_user
DB_PASSWORD=secure_password

# Database Connection Pool
DB_POOL_SIZE=20
DB_MAX_OVERFLOW=30
DB_POOL_TIMEOUT=30
DB_POOL_RECYCLE=1800

# =======================
# REDIS CONFIGURATION
# =======================
REDIS_URL=redis://basketball-cache.cluster.cache.amazonaws.com:6379/0
REDIS_HOST=basketball-cache.cluster.cache.amazonaws.com
REDIS_PORT=6379
REDIS_DB=0
REDIS_PASSWORD=your-redis-password

# Session Configuration
SESSION_TYPE=redis
SESSION_PERMANENT=False
SESSION_USE_SIGNER=True
SESSION_KEY_PREFIX=basketball_session:
PERMANENT_SESSION_LIFETIME=86400

# =======================
# JWT AUTHENTICATION
# =======================
JWT_SECRET_KEY=your-jwt-secret-key-minimum-32-characters-for-security
JWT_ACCESS_TOKEN_EXPIRES=86400
JWT_ALGORITHM=HS256

# =======================
# OAUTH2 PROVIDERS
# =======================
# Google OAuth2
GOOGLE_CLIENT_ID=your-google-client-id.apps.googleusercontent.com
GOOGLE_CLIENT_SECRET=your-google-client-secret

# GitHub OAuth2 (Optional)
GITHUB_CLIENT_ID=your-github-client-id
GITHUB_CLIENT_SECRET=your-github-client-secret

# Microsoft OAuth2 (Optional)
MICROSOFT_CLIENT_ID=your-microsoft-client-id
MICROSOFT_CLIENT_SECRET=your-microsoft-client-secret

# =======================
# STRIPE PAYMENT CONFIGURATION
# =======================
STRIPE_PUBLISHABLE_KEY=pk_live_your_stripe_publishable_key
STRIPE_SECRET_KEY=sk_live_your_stripe_secret_key
STRIPE_WEBHOOK_SECRET=whsec_your_webhook_endpoint_secret

# Stripe Product IDs (create these in Stripe Dashboard)
STRIPE_PRO_MONTHLY_PRICE_ID=price_your_pro_monthly_price_id
STRIPE_PRO_YEARLY_PRICE_ID=price_your_pro_yearly_price_id
STRIPE_ENTERPRISE_MONTHLY_PRICE_ID=price_your_enterprise_monthly_price_id
STRIPE_ENTERPRISE_YEARLY_PRICE_ID=price_your_enterprise_yearly_price_id

# =======================
# AWS CONFIGURATION
# =======================
AWS_ACCESS_KEY_ID=AKIA...your-access-key
AWS_SECRET_ACCESS_KEY=your-secret-access-key
AWS_DEFAULT_REGION=us-east-1

# S3 Storage
S3_BUCKET_NAME=basketball-analysis-videos-prod
S3_BUCKET_REGION=us-east-1
S3_VIDEO_PREFIX=videos/
S3_RESULTS_PREFIX=results/

# CloudFront CDN
CLOUDFRONT_DISTRIBUTION_ID=E1234567890ABC
CLOUDFRONT_DOMAIN=cdn.basketball-analysis.yourdomain.com

# SES Email Service
AWS_SES_REGION=us-east-1
FROM_EMAIL=noreply@basketball-analysis.yourdomain.com
SUPPORT_EMAIL=support@basketball-analysis.yourdomain.com

# =======================
# EMAIL CONFIGURATION
# =======================
MAIL_SERVER=email-smtp.us-east-1.amazonaws.com
MAIL_PORT=587
MAIL_USE_TLS=True
MAIL_USE_SSL=False
MAIL_USERNAME=your-ses-smtp-username
MAIL_PASSWORD=your-ses-smtp-password
MAIL_DEFAULT_SENDER=Basketball Analysis <noreply@basketball-analysis.yourdomain.com>

# Email Templates
EMAIL_VERIFICATION_TEMPLATE=email_verification.html
PASSWORD_RESET_TEMPLATE=password_reset.html
WELCOME_TEMPLATE=welcome.html
SUBSCRIPTION_WELCOME_TEMPLATE=subscription_welcome.html

# =======================
# CELERY TASK QUEUE
# =======================
CELERY_BROKER_URL=redis://basketball-cache.cluster.cache.amazonaws.com:6379/1
CELERY_RESULT_BACKEND=redis://basketball-cache.cluster.cache.amazonaws.com:6379/2
CELERY_TASK_SERIALIZER=json
CELERY_ACCEPT_CONTENT=json
CELERY_RESULT_SERIALIZER=json
CELERY_TIMEZONE=UTC

# =======================
# SECURITY SETTINGS
# =======================
# Password Requirements
MIN_PASSWORD_LENGTH=8
REQUIRE_SPECIAL_CHARS=True
REQUIRE_NUMBERS=True
REQUIRE_UPPERCASE=True

# Rate Limiting
RATELIMIT_STORAGE_URL=redis://basketball-cache.cluster.cache.amazonaws.com:6379/3
RATELIMIT_STRATEGY=fixed-window
DEFAULT_RATE_LIMIT=100 per hour
AUTH_RATE_LIMIT=10 per minute
UPLOAD_RATE_LIMIT=5 per hour

# CORS Settings
CORS_ORIGINS=https://basketball-analysis.yourdomain.com,https://www.basketball-analysis.yourdomain.com
CORS_ALLOW_CREDENTIALS=True

# Security Headers
TALISMAN_FORCE_HTTPS=True
TALISMAN_CSP_POLICY=default-src 'self'; script-src 'self' 'unsafe-inline' https://js.stripe.com; style-src 'self' 'unsafe-inline'; img-src 'self' data: https:; font-src 'self' https:; connect-src 'self' https://api.stripe.com

# =======================
# FILE UPLOAD SETTINGS
# =======================
MAX_CONTENT_LENGTH=104857600  # 100MB
ALLOWED_VIDEO_EXTENSIONS=.mp4,.avi,.mov,.mkv,.webm
MAX_VIDEO_DURATION=300  # 5 minutes
MIN_VIDEO_DURATION=5    # 5 seconds

# Video Processing
VIDEO_PROCESSING_TIMEOUT=600  # 10 minutes
MAX_CONCURRENT_UPLOADS=3
TEMP_UPLOAD_DIR=/tmp/uploads

# =======================
# MONITORING & LOGGING
# =======================
LOG_LEVEL=INFO
LOG_FORMAT=json
LOG_FILE=/var/log/basketball-analysis/app.log
ERROR_LOG_FILE=/var/log/basketball-analysis/error.log

# Prometheus Metrics
PROMETHEUS_METRICS_PORT=9090
METRICS_ENABLED=True

# Health Check
HEALTH_CHECK_ENDPOINT=/health
HEALTH_CHECK_TOKEN=your-health-check-token

# =======================
# FEATURE FLAGS
# =======================
ENABLE_VIDEO_UPLOAD=True
ENABLE_BATCH_PROCESSING=True
ENABLE_API_ACCESS=True
ENABLE_TEAM_FEATURES=True
ENABLE_WEBHOOKS=True

# Subscription Features
FREE_TIER_VIDEO_LIMIT=1
FREE_TIER_ANALYSIS_LIMIT=10
PRO_TIER_VIDEO_LIMIT=-1  # Unlimited
PRO_TIER_ANALYSIS_LIMIT=-1  # Unlimited

# =======================
# CACHE CONFIGURATION
# =======================
CACHE_TYPE=redis
CACHE_REDIS_URL=redis://basketball-cache.cluster.cache.amazonaws.com:6379/4
CACHE_DEFAULT_TIMEOUT=300
CACHE_KEY_PREFIX=basketball_cache:

# =======================
# API CONFIGURATION
# =======================
API_VERSION=v1
API_TITLE=Basketball Analysis API
API_DESCRIPTION=Advanced basketball shot analysis using computer vision
API_DOCS_URL=/api/docs

# API Rate Limits
API_RATE_LIMIT=1000 per hour
API_BURST_LIMIT=50 per minute

# =======================
# PERFORMANCE TUNING
# =======================
GUNICORN_WORKERS=4
GUNICORN_WORKER_CLASS=gevent
GUNICORN_WORKER_CONNECTIONS=1000
GUNICORN_MAX_REQUESTS=1000
GUNICORN_MAX_REQUESTS_JITTER=100
GUNICORN_TIMEOUT=30
GUNICORN_KEEPALIVE=2

# =======================
# SSL/TLS CONFIGURATION
# =======================
SSL_CERT_PATH=/etc/ssl/certs/basketball-analysis.crt
SSL_KEY_PATH=/etc/ssl/private/basketball-analysis.key
SSL_CA_BUNDLE_PATH=/etc/ssl/certs/ca-bundle.crt

# =======================
# DOMAIN CONFIGURATION
# =======================
PRIMARY_DOMAIN=basketball-analysis.yourdomain.com
API_SUBDOMAIN=api.basketball-analysis.yourdomain.com
CDN_SUBDOMAIN=cdn.basketball-analysis.yourdomain.com
ADMIN_SUBDOMAIN=admin.basketball-analysis.yourdomain.com

# Azure Storage (alternative)
AZURE_STORAGE_ACCOUNT=your-storage-account
AZURE_STORAGE_KEY=your-storage-key
AZURE_CONTAINER_NAME=basketball-videos

# Video Processing Settings
MAX_VIDEO_SIZE_MB=100
PROCESSING_TIMEOUT_SECONDS=300
MAX_CONCURRENT_PROCESSING=10
VIDEO_RETENTION_DAYS=90

# Security Settings
JWT_SECRET_KEY=your-jwt-secret-key-here
JWT_ACCESS_TOKEN_EXPIRES=3600
CORS_ORIGINS=https://basketballanalysis.com,https://www.basketballanalysis.com

# Monitoring & Logging
LOG_LEVEL=INFO
SENTRY_DSN=https://your-sentry-dsn@sentry.io/project-id
PROMETHEUS_ENABLED=true
PROMETHEUS_PORT=8000

# Email Configuration (for notifications)
MAIL_SERVER=smtp.sendgrid.net
MAIL_PORT=587
MAIL_USE_TLS=true
MAIL_USERNAME=your-sendgrid-username
MAIL_PASSWORD=your-sendgrid-password
MAIL_DEFAULT_SENDER=noreply@basketballanalysis.com

# Payment Processing (Stripe)
STRIPE_PUBLISHABLE_KEY=pk_live_your_stripe_publishable_key
STRIPE_SECRET_KEY=sk_live_your_stripe_secret_key
STRIPE_WEBHOOK_SECRET=whsec_your_webhook_secret

# Analytics
GOOGLE_ANALYTICS_ID=GA_MEASUREMENT_ID
MIXPANEL_TOKEN=your_mixpanel_token

# Performance Settings
WORKERS_PER_CORE=2
MAX_WORKERS=8
WORKER_MEMORY_LIMIT_MB=2048
GUNICORN_TIMEOUT=60

# Feature Flags
ENABLE_ANALYTICS=true
ENABLE_ADVANCED_METRICS=true
ENABLE_TEAM_FEATURES=false
ENABLE_WHITE_LABEL=false

# API Rate Limiting
API_RATE_LIMIT=100  # requests per minute
UPLOAD_RATE_LIMIT=10  # uploads per hour for free users
