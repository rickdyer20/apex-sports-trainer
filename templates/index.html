{% extends "base.html" %}

{% block content %}
<!-- Hero Section -->
<section class="hero-section">
    <div class="container text-center position-relative">
        <div class="row align-items-center">
            <div class="col-lg-6 text-lg-start">
                <h1 class="display-3 fw-bold mb-4">
                    Elevate Your Game with
                    <span class="d-block" style="background: linear-gradient(45deg, #FFD700, #FFA500); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text;">ApexSports Trainer</span>
                </h1>
                <p class="lead mb-4 fs-4">
                    Professional basketball shooting analysis powered by AI computer vision and biomechanical expertise
                </p>
                <div class="d-flex flex-wrap gap-3 justify-content-lg-start justify-content-center mb-4">
                    <span class="badge bg-light text-dark px-3 py-2 rounded-pill">
                        <i class="fas fa-eye me-1"></i> Real-time Pose Detection
                    </span>
                    <span class="badge bg-light text-dark px-3 py-2 rounded-pill">
                        <i class="fas fa-chart-line me-1"></i> Biomechanical Analysis
                    </span>
                    <span class="badge bg-light text-dark px-3 py-2 rounded-pill">
                        <i class="fas fa-target me-1"></i> Precision Feedback
                    </span>
                </div>
            </div>
            <div class="col-lg-6 text-center">
                <div class="hero-image-container" style="max-width: 400px; margin: 0 auto;">
                    <img src="{{ url_for('static', filename='ApexLogo.jpg') }}" alt="ApexSports Trainer" class="img-fluid" style="filter: drop-shadow(0 10px 30px rgba(0,0,0,0.3)); animation: float 6s ease-in-out infinite;">
                </div>
            </div>
        </div>
        
        <!-- Feature Icons Row -->
        <div class="row justify-content-center mt-5">
            <div class="col-md-10">
                <div class="row">
                    <div class="col-6 col-md-3 mb-4">
                        <div class="feature-highlight text-center">
                            <div class="feature-icon-wrapper mb-3">
                                <i class="fas fa-video fa-3x feature-icon"></i>
                            </div>
                            <h6 class="text-white fw-bold">Video Analysis</h6>
                            <small class="text-white-50">Upload & analyze instantly</small>
                        </div>
                    </div>
                    <div class="col-6 col-md-3 mb-4">
                        <div class="feature-highlight text-center">
                            <div class="feature-icon-wrapper mb-3">
                                <i class="fas fa-crosshairs fa-3x feature-icon"></i>
                            </div>
                            <h6 class="text-white fw-bold">Form Analysis</h6>
                            <small class="text-white-50">Precision tracking</small>
                        </div>
                    </div>
                    <div class="col-6 col-md-3 mb-4">
                        <div class="feature-highlight text-center">
                            <div class="feature-icon-wrapper mb-3">
                                <i class="fas fa-clipboard-check fa-3x feature-icon"></i>
                            </div>
                            <h6 class="text-white fw-bold">Instant Reports</h6>
                            <small class="text-white-50">Detailed feedback</small>
                        </div>
                    </div>
                    <div class="col-6 col-md-3 mb-4">
                        <div class="feature-highlight text-center">
                            <div class="feature-icon-wrapper mb-3">
                                <i class="fas fa-trophy fa-3x feature-icon"></i>
                            </div>
                            <h6 class="text-white fw-bold">Improve Fast</h6>
                            <small class="text-white-50">Track progress</small>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Upload Section -->
<section class="py-5">
    <div class="container">
        <!-- Recording Guidelines (Collapsible) -->
        <div class="text-center mb-4">
            <button class="btn btn-outline-primary" type="button" data-bs-toggle="collapse" data-bs-target="#recordingGuidelines" aria-expanded="false">
                <i class="fas fa-video me-2"></i>Show Recording Guidelines (Recommended)
            </button>
        </div>
        
        <div class="collapse mb-4" id="recordingGuidelines">
            <div class="card">
                <div class="card-header bg-info text-white">
                    <h5 class="mb-0"><i class="fas fa-info-circle me-2"></i>How to Record Your Video for Best Results</h5>
                </div>
                <div class="card-body">
                    <div class="alert alert-warning">
                        <h6><i class="fas fa-mobile-alt me-2"></i>Most Important: Hold Your Phone Horizontally!</h6>
                        <p class="mb-0">Always record in <strong>landscape mode</strong> (phone held sideways). This is crucial for accurate analysis.</p>
                    </div>
                    
                    <div class="row">
                        <div class="col-md-6 mb-3">
                            <h6><i class="fas fa-check-circle text-success me-2"></i>Do This:</h6>
                            <ul class="list-unstyled">
                                <li class="mb-2">üì± Hold phone horizontally (landscape)</li>
                                <li class="mb-2">üëÅÔ∏è Stand to the shooter's side (8-10 feet away)</li>
                                <li class="mb-2">üéØ Show entire body (feet to fingertips)</li>
                                <li class="mb-2">üèÄ Focus on shooter's form (hoop optional)</li>
                                <li class="mb-2">üí° Ensure good lighting on the shooter</li>
                                <li class="mb-2">üìê Keep camera level and steady</li>
                            </ul>
                        </div>
                        <div class="col-md-6 mb-3">
                            <h6><i class="fas fa-times-circle text-danger me-2"></i>Avoid This:</h6>
                            <ul class="list-unstyled">
                                <li class="mb-2">‚ùå Recording in portrait mode (phone upright)</li>
                                <li class="mb-2">‚ùå Standing too close or too far away</li>
                                <li class="mb-2">‚ùå Following the ball with the camera</li>
                                <li class="mb-2">‚ùå Cutting off feet or hands from the frame</li>
                                <li class="mb-2">‚ùå Recording in poor lighting</li>
                                <li class="mb-2">‚ùå Tilting the camera during recording</li>
                            </ul>
                        </div>
                    </div>
                    
                    <div class="text-center">
                        <small class="text-muted">Following these guidelines ensures the most accurate shot analysis possible!</small>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Upload Form -->
        <div class="row justify-content-center">
            <div class="col-md-10">
                <div class="card shadow-lg border-0">
                    <div class="card-header bg-primary text-white text-center py-4">
                        <h3 class="card-title mb-2 fw-bold">
                            <i class="fas fa-upload me-3"></i>
                            Upload Your Basketball Shot Video
                        </h3>
                        <p class="mb-0 opacity-75">Let AI analyze your shooting form in seconds</p>
                    </div>
                    <div class="card-body p-4">
                        <!-- Pro Tips Banner -->
                        <div class="row mb-4">
                            <div class="col-md-6">
                                <div class="alert alert-info border-0 h-100">
                                    <div class="d-flex align-items-center">
                                        <div class="bg-primary text-white rounded-circle d-inline-flex align-items-center justify-content-center me-3" style="width: 60px; height: 60px;">
                                            <i class="fas fa-mobile-alt fa-lg" style="transform: rotate(90deg);"></i>
                                        </div>
                                        <div>
                                            <h6 class="fw-bold mb-1 text-primary">Landscape Mode</h6>
                                            <small class="text-muted">Hold phone sideways for best results</small>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="alert alert-success border-0 h-100">
                                    <div class="d-flex align-items-center">
                                        <div class="bg-success text-white rounded-circle d-inline-flex align-items-center justify-content-center me-3" style="width: 60px; height: 60px;">
                                            <i class="fas fa-eye fa-lg"></i>
                                        </div>
                                        <div>
                                            <h6 class="fw-bold mb-1 text-success">Full Body Shot</h6>
                                            <small class="text-muted">Capture head to toe from the side</small>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <form action="{{ url_for('upload_video') }}" method="post" enctype="multipart/form-data">
                            <div class="upload-area position-relative">
                                <div id="upload-display" class="text-center">
                                    <div class="mb-4">
                                        <div class="d-inline-flex align-items-center justify-content-center bg-primary bg-opacity-10 rounded-circle mb-3" style="width: 100px; height: 100px;">
                                            <i class="fas fa-cloud-upload-alt fa-3x text-primary"></i>
                                        </div>
                                    </div>
                                    <h4 class="fw-bold text-dark mb-3">Drop your video here or click to browse</h4>
                                    <div class="row justify-content-center">
                                        <div class="col-md-8">
                                            <p class="text-muted mb-0">
                                                <i class="fas fa-file-video me-2 text-primary"></i>
                                                <strong>Supported formats:</strong> MP4, AVI, MOV, MKV
                                            </p>
                                            <p class="text-muted mb-0">
                                                <i class="fas fa-weight-hanging me-2 text-warning"></i>
                                                <strong>Maximum size:</strong> 100MB
                                            </p>
                                            <p class="text-muted">
                                                <i class="fas fa-trophy me-2 text-success"></i>
                                                <strong>Best results:</strong> Landscape orientation, good lighting
                                            </p>
                                        </div>
                                    </div>
                                </div>
                                <input type="file" class="form-control opacity-0 position-absolute top-0 start-0 w-100 h-100" name="video" accept=".mp4,.avi,.mov,.mkv" required style="cursor: pointer;">
                            </div>
                            
                            <div class="text-center mt-4">
                                <button type="submit" class="btn btn-primary btn-lg px-5 py-3 fw-bold">
                                    <i class="fas fa-rocket me-2"></i>
                                    Start Analysis
                                </button>
                                <div class="mt-3">
                                    <small class="text-muted">
                                        <i class="fas fa-shield-alt me-1 text-success"></i>
                                        Your video is processed securely and never stored permanently
                                    </small>
                                </div>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
                                    <i class="fas fa-play me-2"></i>
                                    Start Analysis
                                </button>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Features Section -->
<section class="py-5 bg-light">
    <div class="container">
        <div class="text-center mb-5">
            <h2 class="fw-bold">Analysis Features</h2>
            <p class="text-muted">Comprehensive shooting form evaluation powered by computer vision</p>
        </div>
        
        <div class="row g-4">
            <div class="col-md-3">
                <div class="card h-100 feature-card">
                    <div class="card-body text-center">
                        <i class="fas fa-crosshairs fa-3x text-primary mb-3"></i>
                        <h5>Pose Estimation</h5>
                        <p class="text-muted">Real-time body landmark detection using MediaPipe technology</p>
                    </div>
                </div>
            </div>
            
            <div class="col-md-3">
                <div class="card h-100 feature-card">
                    <div class="card-body text-center">
                        <i class="fas fa-angle-double-up fa-3x text-success mb-3"></i>
                        <h5>Joint Angles</h5>
                        <p class="text-muted">Precise measurement of elbow, knee, and wrist angles throughout the shot</p>
                    </div>
                </div>
            </div>
            
            <div class="col-md-3">
                <div class="card h-100 feature-card">
                    <div class="card-body text-center">
                        <i class="fas fa-clock fa-3x text-warning mb-3"></i>
                        <h5>Phase Detection</h5>
                        <p class="text-muted">Automatic identification of load, release, and follow-through phases</p>
                    </div>
                </div>
            </div>
            
            <div class="col-md-3">
                <div class="card h-100 feature-card">
                    <div class="card-body text-center">
                        <i class="fas fa-comments fa-3x text-info mb-3"></i>
                        <h5>Smart Feedback</h5>
                        <p class="text-muted">Intelligent coaching tips based on biomechanical analysis</p>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- How It Works Section -->
<section class="py-5 bg-light">
    <div class="container">
        <div class="text-center mb-5">
            <h2 class="fw-bold display-5 mb-3">How ApexSports Trainer Works</h2>
            <p class="text-muted fs-5">Professional shot analysis in three simple steps</p>
            <div class="mx-auto" style="width: 60px; height: 4px; background: var(--apex-gradient); border-radius: 2px;"></div>
        </div>
        
        <div class="row g-5 align-items-center">
            <div class="col-md-4 text-center">
                <div class="feature-card p-4 bg-white h-100">
                    <div class="mb-4">
                        <div class="bg-primary text-white rounded-circle d-inline-flex align-items-center justify-content-center icon-circle-80 mb-3" style="background: var(--apex-gradient) !important;">
                            <i class="fas fa-upload fa-2x"></i>
                        </div>
                    </div>
                    <h4 class="fw-bold text-primary mb-3">Upload Your Video</h4>
                    <p class="text-muted">Record your basketball shot in landscape mode and upload it securely to our platform for instant analysis.</p>
                    <div class="mt-3">
                        <span class="badge bg-primary bg-opacity-10 text-primary px-3 py-2 rounded-pill">
                            <i class="fas fa-clock me-1"></i> Instant Upload
                        </span>
                    </div>
                </div>
            </div>
            
            <div class="col-md-4 text-center">
                <div class="feature-card p-4 bg-white h-100">
                    <div class="mb-4">
                        <div class="bg-success text-white rounded-circle d-inline-flex align-items-center justify-content-center icon-circle-80 mb-3" style="background: linear-gradient(45deg, #4CAF50, #8BC34A) !important;">
                            <i class="fas fa-brain fa-2x"></i>
                        </div>
                    </div>
                    <h4 class="fw-bold text-success mb-3">AI Analysis</h4>
                    <p class="text-muted">Our advanced computer vision AI analyzes your shooting form, tracking key biomechanical markers and identifying areas for improvement.</p>
                    <div class="mt-3">
                        <span class="badge bg-success bg-opacity-10 text-success px-3 py-2 rounded-pill">
                            <i class="fas fa-robot me-1"></i> AI Powered
                        </span>
                    </div>
                </div>
            </div>
            
            <div class="col-md-4 text-center">
                <div class="feature-card p-4 bg-white h-100">
                    <div class="mb-4">
                        <div class="bg-warning text-white rounded-circle d-inline-flex align-items-center justify-content-center icon-circle-80 mb-3" style="background: linear-gradient(45deg, #FF9800, #FFC107) !important;">
                            <i class="fas fa-trophy fa-2x"></i>
                        </div>
                    </div>
                    <h4 class="fw-bold text-warning mb-3">Get Pro Results</h4>
                    <p class="text-muted">Receive detailed feedback with frame-by-frame analysis, improvement tips, and downloadable reports to elevate your game.</p>
                    <div class="mt-3">
                        <span class="badge bg-warning bg-opacity-10 text-warning px-3 py-2 rounded-pill">
                            <i class="fas fa-chart-line me-1"></i> Detailed Report
                        </span>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Stats Row -->
        <div class="row mt-5 text-center">
            <div class="col-md-3 col-6 mb-4">
                <div class="h2 fw-bold text-primary mb-1">10K+</div>
                <div class="text-muted">Shots Analyzed</div>
            </div>
            <div class="col-md-3 col-6 mb-4">
                <div class="h2 fw-bold text-success mb-1">95%</div>
                <div class="text-muted">Accuracy Rate</div>
            </div>
            <div class="col-md-3 col-6 mb-4">
                <div class="h2 fw-bold text-warning mb-1">2 Sec</div>
                <div class="text-muted">Analysis Time</div>
            </div>
            <div class="col-md-3 col-6 mb-4">
                <div class="h2 fw-bold text-info mb-1">24/7</div>
                <div class="text-muted">Available</div>
            </div>
        </div>
    </div>
</section>
{% endblock %}

{% block scripts %}
<script>
// File input styling and validation
document.querySelector('input[type="file"]').addEventListener('change', function(e) {
    const file = e.target.files[0];
    if (file) {
        const maxSize = 100 * 1024 * 1024; // 100MB
        if (file.size > maxSize) {
            alert('File too large! Maximum size is 100MB.');
            e.target.value = '';
            return;
        }
        
        // Update only the display area, keep the file input
        const uploadDisplay = document.querySelector('#upload-display');
        uploadDisplay.innerHTML = `
            <i class="fas fa-file-video fa-4x text-success mb-3"></i>
            <h4 class="text-success">File Selected: ${file.name}</h4>
            <p class="text-muted">Size: ${(file.size / (1024*1024)).toFixed(2)} MB</p>
            <p class="text-success">Ready to analyze!</p>
        `;
    }
});
</script>
{% endblock %}
